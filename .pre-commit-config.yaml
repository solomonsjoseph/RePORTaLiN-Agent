# Pre-commit hooks for RePORTaLiN-Specialist
# ==========================================
# This config focuses on ESSENTIAL checks only:
#   1. Conventional commit message validation (for auto-versioning)
#   2. Basic safety checks (no secrets, no large files)
#
# Linting is OPTIONAL and runs in CI/CD or via `make lint`
#
# Install: pre-commit install --hook-type commit-msg --hook-type pre-commit
# Run manually: pre-commit run --all-files
# Bypass (emergency): git commit --no-verify -m "message"

default_language_version:
  python: python3

repos:
  # ==========================================================================
  # REQUIRED: Conventional Commits (enables automatic semantic versioning)
  # ==========================================================================
  - repo: https://github.com/commitizen-tools/commitizen
    rev: v3.29.1
    hooks:
      - id: commitizen
        stages: [commit-msg]

  # ==========================================================================
  # REQUIRED: Essential Safety Checks
  # ==========================================================================
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v5.0.0
    hooks:
      # Security: Never commit secrets
      - id: detect-private-key
      # Safety: Prevent accidental large file commits
      - id: check-added-large-files
        args: ['--maxkb=1000']
      # Safety: Prevent merge conflict markers
      - id: check-merge-conflict

  # ==========================================================================
  # OPTIONAL: Linting & Formatting (manual stage - not run on commit)
  # Run with: pre-commit run --hook-stage manual --all-files
  # Or use: make lint / make format
  # ==========================================================================
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.8.1
    hooks:
      - id: ruff
        args: [--fix]
        stages: [manual]
      - id: ruff-format
        stages: [manual]

  - repo: https://github.com/PyCQA/bandit
    rev: 1.7.10
    hooks:
      - id: bandit
        args: ['-c', 'pyproject.toml', '-r', 'scripts/', 'main.py', 'config.py']
        additional_dependencies: ['bandit[toml]']
        stages: [manual]

ci:
  autofix_commit_msg: 'style: auto-fix by pre-commit hooks'
  autoupdate_commit_msg: 'chore(deps): update pre-commit hooks'
